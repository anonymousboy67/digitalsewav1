{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/aashishadhikari/Desktop/kamgaraubeta/digitalsewav1/lib/mongodb.ts"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst MONGODB_URI = process.env.MONGODB_URI!;\n\nif (!MONGODB_URI) {\n  throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\n}\n\ninterface MongooseCache {\n  conn: typeof mongoose | null;\n  promise: Promise<typeof mongoose> | null;\n}\n\ndeclare global {\n  var mongoose: MongooseCache | undefined;\n}\n\nlet cached: MongooseCache = global.mongoose || { conn: null, promise: null };\n\nif (!global.mongoose) {\n  global.mongoose = cached;\n}\n\nasync function dbConnect(): Promise<typeof mongoose> {\n  if (cached.conn) {\n    return cached.conn;\n  }\n\n  if (!cached.promise) {\n    const opts = {\n      bufferCommands: false,\n    };\n\n    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\n      return mongoose;\n    });\n  }\n\n  try {\n    cached.conn = await cached.promise;\n  } catch (e) {\n    cached.promise = null;\n    throw e;\n  }\n\n  return cached.conn;\n}\n\nexport default dbConnect;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MAAM;AAClB;AAWA,IAAI,SAAwB,OAAO,QAAQ,IAAI;IAAE,MAAM;IAAM,SAAS;AAAK;AAE3E,IAAI,CAAC,OAAO,QAAQ,EAAE;IACpB,OAAO,QAAQ,GAAG;AACpB;AAEA,eAAe;IACb,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACzD,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///Users/aashishadhikari/Desktop/kamgaraubeta/digitalsewav1/models/Freelancer.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from 'mongoose';\n\nexport interface IPortfolioItem {\n  title: string;\n  description?: string;\n  imageUrl?: string;\n  projectUrl?: string;\n  category: string;\n}\n\nexport interface IFreelancer extends Document {\n  _id: mongoose.Types.ObjectId;\n  user: mongoose.Types.ObjectId;\n  title: {\n    en: string;\n    np: string;\n  };\n  bio: {\n    en: string;\n    np: string;\n  };\n  skills: string[];\n  hourlyRate: number;\n  availability: 'available' | 'busy' | 'not_available';\n  experience: 'beginner' | 'intermediate' | 'expert';\n  location?: string;\n  languages: string[];\n  portfolio: IPortfolioItem[];\n  completedJobs: number;\n  totalEarnings: number;\n  rating: number;\n  reviewCount: number;\n  isVerified: boolean;\n  isOnline: boolean;\n  lastActive: Date;\n  socialLinks?: {\n    website?: string;\n    linkedin?: string;\n    github?: string;\n    behance?: string;\n    dribbble?: string;\n  };\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nconst PortfolioItemSchema = new Schema({\n  title: {\n    type: String,\n    required: true,\n    trim: true,\n  },\n  description: {\n    type: String,\n    trim: true,\n  },\n  imageUrl: {\n    type: String,\n  },\n  projectUrl: {\n    type: String,\n  },\n  category: {\n    type: String,\n    required: true,\n  },\n});\n\nconst FreelancerSchema: Schema<IFreelancer> = new Schema(\n  {\n    user: {\n      type: Schema.Types.ObjectId,\n      ref: 'User',\n      required: true,\n      unique: true,\n    },\n    title: {\n      en: {\n        type: String,\n        required: [true, 'English title is required'],\n        trim: true,\n        maxlength: [100, 'Title cannot be more than 100 characters'],\n      },\n      np: {\n        type: String,\n        required: [true, 'Nepali title is required'],\n        trim: true,\n        maxlength: [100, 'Title cannot be more than 100 characters'],\n      },\n    },\n    bio: {\n      en: {\n        type: String,\n        required: [true, 'English bio is required'],\n        trim: true,\n        maxlength: [1000, 'Bio cannot be more than 1000 characters'],\n      },\n      np: {\n        type: String,\n        required: [true, 'Nepali bio is required'],\n        trim: true,\n        maxlength: [1000, 'Bio cannot be more than 1000 characters'],\n      },\n    },\n    skills: {\n      type: [String],\n      required: [true, 'At least one skill is required'],\n      validate: {\n        validator: function (v: string[]) {\n          return v.length > 0 && v.length <= 15;\n        },\n        message: 'Skills must be between 1 and 15',\n      },\n    },\n    hourlyRate: {\n      type: Number,\n      required: [true, 'Hourly rate is required'],\n      min: [100, 'Hourly rate must be at least Rs. 100'],\n    },\n    availability: {\n      type: String,\n      enum: ['available', 'busy', 'not_available'],\n      default: 'available',\n    },\n    experience: {\n      type: String,\n      enum: ['beginner', 'intermediate', 'expert'],\n      default: 'intermediate',\n    },\n    location: {\n      type: String,\n      trim: true,\n    },\n    languages: {\n      type: [String],\n      default: ['Nepali', 'English'],\n    },\n    portfolio: {\n      type: [PortfolioItemSchema],\n      default: [],\n    },\n    completedJobs: {\n      type: Number,\n      default: 0,\n      min: 0,\n    },\n    totalEarnings: {\n      type: Number,\n      default: 0,\n      min: 0,\n    },\n    rating: {\n      type: Number,\n      default: 0,\n      min: 0,\n      max: 5,\n    },\n    reviewCount: {\n      type: Number,\n      default: 0,\n      min: 0,\n    },\n    isVerified: {\n      type: Boolean,\n      default: false,\n    },\n    isOnline: {\n      type: Boolean,\n      default: false,\n    },\n    lastActive: {\n      type: Date,\n      default: Date.now,\n    },\n    socialLinks: {\n      website: String,\n      linkedin: String,\n      github: String,\n      behance: String,\n      dribbble: String,\n    },\n  },\n  {\n    timestamps: true,\n  }\n);\n\n// Indexes for faster queries\nFreelancerSchema.index({ skills: 1 });\nFreelancerSchema.index({ rating: -1 });\nFreelancerSchema.index({ hourlyRate: 1 });\nFreelancerSchema.index({ availability: 1 });\nFreelancerSchema.index({ isVerified: 1 });\n\nconst Freelancer: Model<IFreelancer> =\n  mongoose.models.Freelancer || mongoose.model<IFreelancer>('Freelancer', FreelancerSchema);\n\nexport default Freelancer;\n"],"names":[],"mappings":";;;;AAAA;;AA8CA,MAAM,sBAAsB,IAAI,kKAAM,CAAC;IACrC,OAAO;QACL,MAAM;QACN,UAAU;QACV,MAAM;IACR;IACA,aAAa;QACX,MAAM;QACN,MAAM;IACR;IACA,UAAU;QACR,MAAM;IACR;IACA,YAAY;QACV,MAAM;IACR;IACA,UAAU;QACR,MAAM;QACN,UAAU;IACZ;AACF;AAEA,MAAM,mBAAwC,IAAI,kKAAM,CACtD;IACE,MAAM;QACJ,MAAM,kKAAM,CAAC,KAAK,CAAC,QAAQ;QAC3B,KAAK;QACL,UAAU;QACV,QAAQ;IACV;IACA,OAAO;QACL,IAAI;YACF,MAAM;YACN,UAAU;gBAAC;gBAAM;aAA4B;YAC7C,MAAM;YACN,WAAW;gBAAC;gBAAK;aAA2C;QAC9D;QACA,IAAI;YACF,MAAM;YACN,UAAU;gBAAC;gBAAM;aAA2B;YAC5C,MAAM;YACN,WAAW;gBAAC;gBAAK;aAA2C;QAC9D;IACF;IACA,KAAK;QACH,IAAI;YACF,MAAM;YACN,UAAU;gBAAC;gBAAM;aAA0B;YAC3C,MAAM;YACN,WAAW;gBAAC;gBAAM;aAA0C;QAC9D;QACA,IAAI;YACF,MAAM;YACN,UAAU;gBAAC;gBAAM;aAAyB;YAC1C,MAAM;YACN,WAAW;gBAAC;gBAAM;aAA0C;QAC9D;IACF;IACA,QAAQ;QACN,MAAM;YAAC;SAAO;QACd,UAAU;YAAC;YAAM;SAAiC;QAClD,UAAU;YACR,WAAW,SAAU,CAAW;gBAC9B,OAAO,EAAE,MAAM,GAAG,KAAK,EAAE,MAAM,IAAI;YACrC;YACA,SAAS;QACX;IACF;IACA,YAAY;QACV,MAAM;QACN,UAAU;YAAC;YAAM;SAA0B;QAC3C,KAAK;YAAC;YAAK;SAAuC;IACpD;IACA,cAAc;QACZ,MAAM;QACN,MAAM;YAAC;YAAa;YAAQ;SAAgB;QAC5C,SAAS;IACX;IACA,YAAY;QACV,MAAM;QACN,MAAM;YAAC;YAAY;YAAgB;SAAS;QAC5C,SAAS;IACX;IACA,UAAU;QACR,MAAM;QACN,MAAM;IACR;IACA,WAAW;QACT,MAAM;YAAC;SAAO;QACd,SAAS;YAAC;YAAU;SAAU;IAChC;IACA,WAAW;QACT,MAAM;YAAC;SAAoB;QAC3B,SAAS,EAAE;IACb;IACA,eAAe;QACb,MAAM;QACN,SAAS;QACT,KAAK;IACP;IACA,eAAe;QACb,MAAM;QACN,SAAS;QACT,KAAK;IACP;IACA,QAAQ;QACN,MAAM;QACN,SAAS;QACT,KAAK;QACL,KAAK;IACP;IACA,aAAa;QACX,MAAM;QACN,SAAS;QACT,KAAK;IACP;IACA,YAAY;QACV,MAAM;QACN,SAAS;IACX;IACA,UAAU;QACR,MAAM;QACN,SAAS;IACX;IACA,YAAY;QACV,MAAM;QACN,SAAS,KAAK,GAAG;IACnB;IACA,aAAa;QACX,SAAS;QACT,UAAU;QACV,QAAQ;QACR,SAAS;QACT,UAAU;IACZ;AACF,GACA;IACE,YAAY;AACd;AAGF,6BAA6B;AAC7B,iBAAiB,KAAK,CAAC;IAAE,QAAQ;AAAE;AACnC,iBAAiB,KAAK,CAAC;IAAE,QAAQ,CAAC;AAAE;AACpC,iBAAiB,KAAK,CAAC;IAAE,YAAY;AAAE;AACvC,iBAAiB,KAAK,CAAC;IAAE,cAAc;AAAE;AACzC,iBAAiB,KAAK,CAAC;IAAE,YAAY;AAAE;AAEvC,MAAM,aACJ,mKAAQ,CAAC,MAAM,CAAC,UAAU,IAAI,mKAAQ,CAAC,KAAK,CAAc,cAAc;uCAE3D"}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///Users/aashishadhikari/Desktop/kamgaraubeta/digitalsewav1/models/User.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from 'mongoose';\n\nexport interface IUser extends Document {\n  _id: mongoose.Types.ObjectId;\n  name: string;\n  email: string;\n  password: string;\n  phone?: string;\n  role: 'client' | 'freelancer';\n  image?: string;\n  isVerified: boolean;\n  kycStatus: 'pending' | 'submitted' | 'verified' | 'rejected';\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nconst UserSchema: Schema<IUser> = new Schema(\n  {\n    name: {\n      type: String,\n      required: [true, 'Please provide a name'],\n      trim: true,\n      maxlength: [50, 'Name cannot be more than 50 characters'],\n    },\n    email: {\n      type: String,\n      required: [true, 'Please provide an email'],\n      unique: true,\n      lowercase: true,\n      trim: true,\n      match: [\n        /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/,\n        'Please provide a valid email',\n      ],\n    },\n    password: {\n      type: String,\n      required: [true, 'Please provide a password'],\n      minlength: [6, 'Password must be at least 6 characters'],\n      select: false,\n    },\n    phone: {\n      type: String,\n      trim: true,\n    },\n    role: {\n      type: String,\n      enum: ['client', 'freelancer'],\n      default: 'client',\n    },\n    image: {\n      type: String,\n    },\n    isVerified: {\n      type: Boolean,\n      default: false,\n    },\n    kycStatus: {\n      type: String,\n      enum: ['pending', 'submitted', 'verified', 'rejected'],\n      default: 'pending',\n    },\n  },\n  {\n    timestamps: true,\n  }\n);\n\nconst User: Model<IUser> = mongoose.models.User || mongoose.model<IUser>('User', UserSchema);\n\nexport default User;\n"],"names":[],"mappings":";;;;AAAA;;AAgBA,MAAM,aAA4B,IAAI,kKAAM,CAC1C;IACE,MAAM;QACJ,MAAM;QACN,UAAU;YAAC;YAAM;SAAwB;QACzC,MAAM;QACN,WAAW;YAAC;YAAI;SAAyC;IAC3D;IACA,OAAO;QACL,MAAM;QACN,UAAU;YAAC;YAAM;SAA0B;QAC3C,QAAQ;QACR,WAAW;QACX,MAAM;QACN,OAAO;YACL;YACA;SACD;IACH;IACA,UAAU;QACR,MAAM;QACN,UAAU;YAAC;YAAM;SAA4B;QAC7C,WAAW;YAAC;YAAG;SAAyC;QACxD,QAAQ;IACV;IACA,OAAO;QACL,MAAM;QACN,MAAM;IACR;IACA,MAAM;QACJ,MAAM;QACN,MAAM;YAAC;YAAU;SAAa;QAC9B,SAAS;IACX;IACA,OAAO;QACL,MAAM;IACR;IACA,YAAY;QACV,MAAM;QACN,SAAS;IACX;IACA,WAAW;QACT,MAAM;QACN,MAAM;YAAC;YAAW;YAAa;YAAY;SAAW;QACtD,SAAS;IACX;AACF,GACA;IACE,YAAY;AACd;AAGF,MAAM,OAAqB,mKAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,mKAAQ,CAAC,KAAK,CAAQ,QAAQ;uCAElE"}},
    {"offset": {"line": 397, "column": 0}, "map": {"version":3,"sources":["file:///Users/aashishadhikari/Desktop/kamgaraubeta/digitalsewav1/lib/auth.ts"],"sourcesContent":["import NextAuth from 'next-auth';\nimport Credentials from 'next-auth/providers/credentials';\nimport bcrypt from 'bcryptjs';\nimport dbConnect from './mongodb';\nimport User from '@/models/User';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [\n    Credentials({\n      name: 'credentials',\n      credentials: {\n        email: { label: 'Email', type: 'email' },\n        password: { label: 'Password', type: 'password' },\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) {\n          throw new Error('Please provide email and password');\n        }\n\n        await dbConnect();\n\n        const user = await User.findOne({ email: credentials.email }).select('+password');\n\n        if (!user) {\n          throw new Error('No user found with this email');\n        }\n\n        const isPasswordValid = await bcrypt.compare(\n          credentials.password as string,\n          user.password\n        );\n\n        if (!isPasswordValid) {\n          throw new Error('Invalid password');\n        }\n\n        return {\n          id: user._id.toString(),\n          name: user.name,\n          email: user.email,\n          role: user.role,\n          image: user.image,\n        };\n      },\n    }),\n  ],\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        token.id = user.id;\n        token.role = (user as any).role;\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      if (session.user) {\n        session.user.id = token.id as string;\n        (session.user as any).role = token.role;\n      }\n      return session;\n    },\n  },\n  pages: {\n    signIn: '/login',\n    error: '/login',\n  },\n  session: {\n    strategy: 'jwt',\n  },\n  secret: process.env.NEXTAUTH_SECRET,\n});\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;AAEO,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,kKAAQ,EAAC;IAC1D,WAAW;QACT,IAAA,uKAAW,EAAC;YACV,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBACjD,MAAM,IAAI,MAAM;gBAClB;gBAEA,MAAM,IAAA,2HAAS;gBAEf,MAAM,OAAO,MAAM,2HAAI,CAAC,OAAO,CAAC;oBAAE,OAAO,YAAY,KAAK;gBAAC,GAAG,MAAM,CAAC;gBAErE,IAAI,CAAC,MAAM;oBACT,MAAM,IAAI,MAAM;gBAClB;gBAEA,MAAM,kBAAkB,MAAM,8IAAM,CAAC,OAAO,CAC1C,YAAY,QAAQ,EACpB,KAAK,QAAQ;gBAGf,IAAI,CAAC,iBAAiB;oBACpB,MAAM,IAAI,MAAM;gBAClB;gBAEA,OAAO;oBACL,IAAI,KAAK,GAAG,CAAC,QAAQ;oBACrB,MAAM,KAAK,IAAI;oBACf,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;oBACf,OAAO,KAAK,KAAK;gBACnB;YACF;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,IAAI,GAAG,AAAC,KAAa,IAAI;YACjC;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,QAAQ,IAAI,EAAE;gBAChB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBACzB,QAAQ,IAAI,CAAS,IAAI,GAAG,MAAM,IAAI;YACzC;YACA,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;QACR,OAAO;IACT;IACA,SAAS;QACP,UAAU;IACZ;IACA,QAAQ,QAAQ,GAAG,CAAC,eAAe;AACrC"}},
    {"offset": {"line": 486, "column": 0}, "map": {"version":3,"sources":["file:///Users/aashishadhikari/Desktop/kamgaraubeta/digitalsewav1/app/api/freelancers/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport dbConnect from '@/lib/mongodb';\nimport Freelancer from '@/models/Freelancer';\nimport User from '@/models/User';\nimport { auth } from '@/lib/auth';\n\n// GET all freelancers (with optional filters)\nexport async function GET(request: NextRequest) {\n  try {\n    await dbConnect();\n\n    const { searchParams } = new URL(request.url);\n    const skill = searchParams.get('skill');\n    const availability = searchParams.get('availability');\n    const experience = searchParams.get('experience');\n    const minRate = searchParams.get('minRate');\n    const maxRate = searchParams.get('maxRate');\n    const verified = searchParams.get('verified');\n    const limit = parseInt(searchParams.get('limit') || '20');\n    const page = parseInt(searchParams.get('page') || '1');\n    const sort = searchParams.get('sort') || 'rating';\n\n    // Build query\n    const query: any = {};\n\n    if (skill) {\n      query.skills = { $in: [new RegExp(skill, 'i')] };\n    }\n\n    if (availability) {\n      query.availability = availability;\n    }\n\n    if (experience) {\n      query.experience = experience;\n    }\n\n    if (minRate || maxRate) {\n      query.hourlyRate = {};\n      if (minRate) query.hourlyRate.$gte = parseInt(minRate);\n      if (maxRate) query.hourlyRate.$lte = parseInt(maxRate);\n    }\n\n    if (verified === 'true') {\n      query.isVerified = true;\n    }\n\n    const skip = (page - 1) * limit;\n\n    // Determine sort order\n    let sortOption: any = { rating: -1 };\n    switch (sort) {\n      case 'rate_low':\n        sortOption = { hourlyRate: 1 };\n        break;\n      case 'rate_high':\n        sortOption = { hourlyRate: -1 };\n        break;\n      case 'jobs':\n        sortOption = { completedJobs: -1 };\n        break;\n      case 'newest':\n        sortOption = { createdAt: -1 };\n        break;\n      default:\n        sortOption = { rating: -1, reviewCount: -1 };\n    }\n\n    const [freelancers, total] = await Promise.all([\n      Freelancer.find(query)\n        .populate('user', 'name email image')\n        .sort(sortOption)\n        .skip(skip)\n        .limit(limit)\n        .lean(),\n      Freelancer.countDocuments(query),\n    ]);\n\n    return NextResponse.json({\n      freelancers,\n      pagination: {\n        total,\n        page,\n        limit,\n        totalPages: Math.ceil(total / limit),\n      },\n    });\n  } catch (error: any) {\n    console.error('Error fetching freelancers:', error);\n    return NextResponse.json(\n      { error: 'Failed to fetch freelancers' },\n      { status: 500 }\n    );\n  }\n}\n\n// POST - Create freelancer profile\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await auth();\n\n    if (!session?.user) {\n      return NextResponse.json(\n        { error: 'You must be logged in to create a profile' },\n        { status: 401 }\n      );\n    }\n\n    // Check if user is a freelancer\n    if ((session.user as any).role !== 'freelancer') {\n      return NextResponse.json(\n        { error: 'Only freelancers can create a freelancer profile' },\n        { status: 403 }\n      );\n    }\n\n    await dbConnect();\n\n    // Check if profile already exists\n    const existingProfile = await Freelancer.findOne({ user: session.user.id });\n    if (existingProfile) {\n      return NextResponse.json(\n        { error: 'You already have a freelancer profile. Use PUT to update.' },\n        { status: 400 }\n      );\n    }\n\n    const body = await request.json();\n\n    const {\n      title,\n      bio,\n      skills,\n      hourlyRate,\n      availability,\n      experience,\n      location,\n      languages,\n      socialLinks,\n    } = body;\n\n    // Validate required fields\n    if (!title?.en || !title?.np) {\n      return NextResponse.json(\n        { error: 'Both English and Nepali titles are required' },\n        { status: 400 }\n      );\n    }\n\n    if (!bio?.en || !bio?.np) {\n      return NextResponse.json(\n        { error: 'Both English and Nepali bios are required' },\n        { status: 400 }\n      );\n    }\n\n    if (!skills || skills.length === 0) {\n      return NextResponse.json(\n        { error: 'At least one skill is required' },\n        { status: 400 }\n      );\n    }\n\n    if (!hourlyRate || hourlyRate < 100) {\n      return NextResponse.json(\n        { error: 'Hourly rate must be at least Rs. 100' },\n        { status: 400 }\n      );\n    }\n\n    // Create the freelancer profile\n    const freelancer = await Freelancer.create({\n      user: session.user.id,\n      title,\n      bio,\n      skills,\n      hourlyRate,\n      availability: availability || 'available',\n      experience: experience || 'intermediate',\n      location,\n      languages: languages || ['Nepali', 'English'],\n      socialLinks,\n    });\n\n    const populatedFreelancer = await Freelancer.findById(freelancer._id)\n      .populate('user', 'name email image')\n      .lean();\n\n    return NextResponse.json(\n      {\n        message: 'Freelancer profile created successfully',\n        freelancer: populatedFreelancer,\n      },\n      { status: 201 }\n    );\n  } catch (error: any) {\n    console.error('Error creating freelancer profile:', error);\n\n    if (error.name === 'ValidationError') {\n      const messages = Object.values(error.errors).map((e: any) => e.message);\n      return NextResponse.json(\n        { error: messages.join(', ') },\n        { status: 400 }\n      );\n    }\n\n    if (error.code === 11000) {\n      return NextResponse.json(\n        { error: 'You already have a freelancer profile' },\n        { status: 400 }\n      );\n    }\n\n    return NextResponse.json(\n      { error: 'Failed to create freelancer profile' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":"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"}}]
}